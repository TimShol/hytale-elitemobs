---
title: API Overview
description: Integration guide for mod developers who want to hook into EliteMobs events and data.
---

The EliteMobs API allows other Hytale mods to react to elite mob events, inspect mob state, and modify behavior at runtime. It ships as a separate `elitemobs-api` artifact so your mod only depends on the lightweight API interfaces, not the full plugin.

## Setup

### Dependency

Add the API JAR as a compile-only dependency in your `build.gradle`:

```groovy
dependencies {
    compileOnly files('libs/EliteMobs-API-1.1.0.jar')
}
```

Or if published to a Maven repository:

```groovy
dependencies {
    compileOnly 'Frotty27:elitemobs-api:1.1.0'
}
```

### Mod Manifest

Declare EliteMobs as a dependency in your mod's `manifest.json` so Hytale loads it before your mod:

```json
{
  "Dependencies": {
    "Frotty27:EliteMobs": "*"
  }
}
```

## Entry Point

All API access goes through the static `EliteMobsAPI` class:

```java
import com.frotty27.elitemobs.api.EliteMobsAPI;

// Register a listener
EliteMobsAPI.registerListener(myListener);

// Query mob state
EliteMobsAPI.query().getTier(entityRef);

// Unregister when your mod shuts down
EliteMobsAPI.unregisterListener(myListener);
```

If EliteMobs has not initialized yet, calling these methods throws `EliteMobsNotInitializedException`.

## Event System

Implement `IEliteMobsEventListener` and override the events you care about. All handler methods have default no-op implementations, so you only need to override what you use.

```java
import com.frotty27.elitemobs.api.IEliteMobsEventListener;
import com.frotty27.elitemobs.api.events.*;

public class MyEliteListener implements IEliteMobsEventListener {

    @Override
    public void onEliteMobSpawned(EliteMobSpawnedEvent event) {
        int tier = event.getTier();
        // Cancel the spawn if needed
        // event.setCancelled(true);
    }

    @Override
    public void onEliteMobDrops(EliteMobDropsEvent event) {
        // Add custom items to the drop list
        event.getDrops().add(myCustomItem);
    }

    @Override
    public void onEliteMobDamageDealt(EliteMobDamageDealtEvent event) {
        // Reduce elite damage by 20%
        event.setMultiplier(event.getMultiplier() * 0.8f);
    }
}
```

Register it during your mod's initialization:

```java
EliteMobsAPI.registerListener(new MyEliteListener());
```

### Available Events

| Event | Fired when | Cancellable | Mutable fields |
| :--- | :--- | :---: | :--- |
| `EliteMobSpawnedEvent` | Elite enters the world | Yes | &mdash; |
| `EliteMobDeathEvent` | Elite dies | No | &mdash; |
| `EliteMobDropsEvent` | Loot is about to spawn | Yes | `getDrops()` (live list) |
| `EliteMobDamageDealtEvent` | Elite deals outgoing damage | Yes | `setMultiplier(float)` |
| `EliteMobDamageReceivedEvent` | Elite takes incoming damage | No | &mdash; |
| `EliteMobAbilityStartedEvent` | Ability execution begins | Yes | &mdash; |
| `EliteMobAbilityCompletedEvent` | Ability finishes normally | No | &mdash; |
| `EliteMobAbilityInterruptedEvent` | Ability was interrupted | No | `getReason()` |
| `EliteMobAggroEvent` | Elite targets an entity | No | `targetRef()` |
| `EliteMobDeaggroEvent` | Elite loses its target | No | &mdash; |
| `EliteMobScalingAppliedEvent` | Scaling parameters computed | No | All fields (read-only record) |
| `EliteMobReconcileEvent` | Config reconciliation pass | No | &mdash; |

### Base Event Fields

Every event extends `EliteMobEvent` which provides:

*   `getEntityRef()` &mdash; the elite mob's `Ref<EntityStore>`
*   `getTier()` &mdash; zero-based tier index (0 = Tier 1, 4 = Tier 5)
*   `getRoleName()` &mdash; the NPC role identifier (e.g. `"Skeleton_Frost_Knight"`)

### Cancelling Events

Events that implement `ICancellable` can be cancelled to prevent the action:

```java
@Override
public void onEliteMobSpawned(EliteMobSpawnedEvent event) {
    if (event.getTier() >= 4) {
        event.setCancelled(true); // Block Tier 5 spawns
    }
}
```

Cancellable events: `EliteMobSpawnedEvent`, `EliteMobDropsEvent`, `EliteMobDamageDealtEvent`, `EliteMobAbilityStartedEvent`.

## Query API

The Query API provides read-only access to any elite mob's current state. Access it via `EliteMobsAPI.query()`.

```java
import com.frotty27.elitemobs.api.query.IEliteMobsQueryAPI;

IEliteMobsQueryAPI query = EliteMobsAPI.query();
```

### Identity

| Method | Returns | Description |
| :--- | :--- | :--- |
| `isEliteMob(ref)` | `boolean` | Whether the entity is an EliteMobs elite |
| `getTier(ref)` | `Optional<Integer>` | Zero-based tier index |

### Scaling

| Method | Returns | Description |
| :--- | :--- | :--- |
| `getHealthMultiplier(ref)` | `Optional<Float>` | Applied health multiplier |
| `getDamageMultiplier(ref)` | `Optional<Float>` | Applied damage multiplier |
| `getModelScale(ref)` | `Optional<Float>` | Visual size scale |
| `isHealthFinalized(ref)` | `boolean` | Whether health scaling has been verified |

### Progression

| Method | Returns | Description |
| :--- | :--- | :--- |
| `getSpawnDistance(ref)` | `Optional<Float>` | Distance from world origin at spawn |
| `getDistanceHealthBonus(ref)` | `Optional<Float>` | Bonus health from distance |
| `getDistanceDamageBonus(ref)` | `Optional<Float>` | Bonus damage from distance |

### Combat

| Method | Returns | Description |
| :--- | :--- | :--- |
| `isInCombat(ref)` | `boolean` | Whether the mob has an active target |
| `getLastAggroTarget(ref)` | `Optional<Ref<EntityStore>>` | Current or last aggro target |
| `getLastAggroTick(ref)` | `Optional<Long>` | Server tick of last aggro event |

### Summons

| Method | Returns | Description |
| :--- | :--- | :--- |
| `getSummonedMinionCount(ref)` | `Optional<Integer>` | Number of active summoned minions |

### Abilities

| Method | Returns | Description |
| :--- | :--- | :--- |
| `getSupportedTriggerTypes()` | `Set<String>` | All registered ability trigger type IDs |
| `isTriggerTypeSupported(id)` | `boolean` | Whether a specific trigger type is registered |

## Ability Types

The `AbilityType` enum defines the built-in abilities:

| Enum | ID | Description |
| :--- | :--- | :--- |
| `HEAL_LEAP` | `"HEAL_LEAP"` | Jump to safety and self-heal |
| `CHARGE_LEAP` | `"CHARGE_LEAP"` | Leap toward target with area damage |
| `SUMMON_UNDEAD` | `"SUMMON_UNDEAD"` | Spawn undead reinforcements |

## Example: Full Integration

```java
import com.frotty27.elitemobs.api.EliteMobsAPI;
import com.frotty27.elitemobs.api.IEliteMobsEventListener;
import com.frotty27.elitemobs.api.events.*;

public class MyMod implements IEliteMobsEventListener {

    public void onEnable() {
        EliteMobsAPI.registerListener(this);
    }

    public void onDisable() {
        EliteMobsAPI.unregisterListener(this);
    }

    @Override
    public void onEliteMobSpawned(EliteMobSpawnedEvent event) {
        // Log spawns for analytics
        System.out.println("Elite spawned: tier=" + event.getTier()
            + " role=" + event.getRoleName());
    }

    @Override
    public void onEliteMobDrops(EliteMobDropsEvent event) {
        // Double drops for Tier 5 elites
        if (event.getTier() == 4) {
            var drops = event.getDrops();
            drops.addAll(new ArrayList<>(drops));
        }
    }

    @Override
    public void onEliteMobDamageDealt(EliteMobDamageDealtEvent event) {
        // Check if mob is far from spawn using query API
        var distance = EliteMobsAPI.query()
            .getSpawnDistance(event.getEntityRef());

        if (distance.isPresent() && distance.get() > 5000f) {
            // Extra 10% damage for mobs far from spawn
            event.setMultiplier(event.getMultiplier() * 1.1f);
        }
    }
}
```

## Thread Safety

Event callbacks are dispatched from the server's main tick thread. Do not perform blocking I/O or long-running computations inside event handlers. If you need async processing, queue work to a separate thread and return immediately.

The Query API reads component data from the entity store and should only be called from contexts where the store is accessible (event handlers, tick systems, or `world.execute()` callbacks).
